
==== persist.img ====

[ 22% 16551/72409] /bin/bash -c "(mkdir -p out/target/product/sdm660_64/persist ) && (out/host/linux-x86/bin/mkuserimg.sh -s out/target/product/sdm660_64/persist out/target/product/sdm660_64/persist.img ext4 persist 33554432 ) && (chmod a+r out/target/product/sdm660_64/persist.img ) && (size=\$(for i in out/target/product/sdm660_64/persist.img; do stat --format \"%s\" \"\$i\" | tr -d '\\n'; echo +; done; echo 0); total=\$(( \$( echo \"\$size\" ) )); printname=\$(echo -n \"out/target/product/sdm660_64/persist.img\" | tr \" \" +); img_blocksize=135168; twoblocks=\$((img_blocksize * 2)); onepct=\$(((((34603008 / 100) - 1) / img_blocksize + 1) * img_blocksize)); reserve=\$((twoblocks > onepct ? twoblocks : onepct)); maxsize=\$((34603008 - reserve)); echo \"\$printname maxsize=\$maxsize blocksize=\$img_blocksize total=\$total reserve=\$reserve\"; if [ \"\$total\" -gt \"\$maxsize\" ]; then echo \"error: \$printname too large (\$total > [34603008 - \$reserve])\"; false; elif [ \"\$total\" -gt \$((maxsize - 32768)) ]; then echo \"WARNING: \$printname approaching size limit (\$total now; limit \$maxsize)\"; fi )"
make_ext4fs -s -T -1 -l 33554432 -a persist out/target/product/sdm660_64/persist.img out/target/product/sdm660_64/persist
Creating filesystem with parameters:
    Size: 33554432
    Block size: 4096
    Blocks per group: 32768
    Inodes per group: 2048
    Inode size: 256
    Journal blocks: 1024
    Label: 
    Blocks: 8192
    Block groups: 1
    Reserved block group size: 7
Created filesystem with 28/2048 inodes and 1183/8192 blocks
out/target/product/sdm660_64/persist.img maxsize=34197504 blocksize=135168 total=4846052 reserve=405504


==== ramdisk.img ====

[ 91% 66380/72409] /bin/bash -c "out/host/linux-x86/bin/mkbootfs -d out/target/product/sdm660_64/system out/target/product/sdm660_64/root | out/host/linux-x86/bin/minigzip > out/target/product/sdm660_64/ramdisk.img"

==== boot.img ====

[ 91% 66414/72409] /bin/bash -c "(echo ----- Making recovery image ------ ) && (mkdir -p out/target/product/sdm660_64/recovery ) && (mkdir -p out/target/product/sdm660_64/recovery/root/etc out/target/product/sdm660_64/recovery/root/sdcard out/target/product/sdm660_64/recovery/root/tmp ) && (echo Copying baseline ramdisk... ) && (rsync -a --exclude=etc --exclude=sdcard --exclude=cache out/target/product/sdm660_64/root out/target/product/sdm660_64/recovery ) && (echo Modifying ramdisk contents... ) && (rm -f out/target/product/sdm660_64/recovery/root/init*.rc ) && (cp -f bootable/recovery/etc/init.rc out/target/product/sdm660_64/recovery/root/ ) && (rm -f out/target/product/sdm660_64/recovery/root/sepolicy ) && (cp -f out/target/product/sdm660_64/obj/ETC/sepolicy.recovery_intermediates/sepolicy.recovery out/target/product/sdm660_64/recovery/root/sepolicy ) && (cp out/target/product/sdm660_64/root/init.recovery.*.rc out/target/product/sdm660_64/recovery/root/ || true ) && (mkdir -p out/target/product/sdm660_64/recovery/root/res ) && (rm -rf out/target/product/sdm660_64/recovery/root/res/* ) && (cp -rf bootable/recovery/res-xhdpi/* out/target/product/sdm660_64/recovery/root/res ) && (cp -f bootable/recovery/fonts/12x22.png out/target/product/sdm660_64/recovery/root/res/images/font.png ) && (cp -f device/qcom/sdm660_64/recovery.fstab out/target/product/sdm660_64/recovery/root/etc/recovery.fstab ) && (cp out/target/product/sdm660_64/obj/PACKAGING/ota_keys_intermediates/keys out/target/product/sdm660_64/recovery/root/res/keys ) && (cat out/target/product/sdm660_64/root/default.prop out/target/product/sdm660_64/obj/ETC/system_build_prop_intermediates/build.prop > out/target/product/sdm660_64/recovery/root/default.prop ) && (mkdir -p out/target/product/sdm660_64/recovery/root/system_root; rm -rf out/target/product/sdm660_64/recovery/root/system; ln -sf /system_root/system out/target/product/sdm660_64/recovery/root/system ) && (out/host/linux-x86/bin/mkbootfs -d out/target/product/sdm660_64/system out/target/product/sdm660_64/recovery/root | out/host/linux-x86/bin/minigzip > out/target/product/sdm660_64/ramdisk-recovery.img ) && (out/host/linux-x86/bin/mkbootimg  --kernel out/target/product/sdm660_64/kernel  --ramdisk out/target/product/sdm660_64/ramdisk-recovery.img --cmdline \"console=ttyMSM0,115200,n8 androidboot.console=ttyMSM0 earlycon=msm_serial_dm,0xc170000 androidboot.hardware=qcom user_debug=31 msm_rtb.filter=0x37 ehci-hcd.park=3 lpm_levels.sleep_disabled=1 sched_enable_hmp=1 sched_enable_power_aware=1 service_locator.enable=1 swiotlb=1 androidboot.configfs=true androidboot.usbcontroller=a800000.dwc3 buildvariant=userdebug veritykeyid=id:\`openssl x509 -in build/target/product/security/verity.x509.pem -text | grep keyid | sed 's/://g' | tr -d '[:space:]' | tr '[:upper:]' '[:lower:]' | sed 's/keyid//g'\`\" --base 0x00000000 --pagesize 4096 --os_version 7.1.1 --os_patch_level 2017-02-05  --output  out/target/product/sdm660_64/boot.img --id > out/target/product/sdm660_64/recovery.id ) && (out/host/linux-x86/bin/boot_signer /boot  out/target/product/sdm660_64/boot.img build/target/product/security/verity.pk8 build/target/product/security/verity.x509.pem  out/target/product/sdm660_64/boot.img ) && (size=\$(for i in  out/target/product/sdm660_64/boot.img; do stat --format \"%s\" \"\$i\" | tr -d '\\n'; echo +; done; echo 0); total=\$(( \$( echo \"\$size\" ) )); printname=\$(echo -n \" out/target/product/sdm660_64/boot.img\" | tr \" \" +); img_blocksize=135168; twoblocks=\$((img_blocksize * 2)); onepct=\$(((((69206016 / 100) - 1) / img_blocksize + 1) * img_blocksize)); reserve=\$((twoblocks > onepct ? twoblocks : onepct)); maxsize=\$((69206016 - reserve)); echo \"\$printname maxsize=\$maxsize blocksize=\$img_blocksize total=\$total reserve=\$reserve\"; if [ \"\$total\" -gt \"\$maxsize\" ]; then echo \"error: \$printname too large (\$total > [69206016 - \$reserve])\"; false; elif [ \"\$total\" -gt \$((maxsize - 32768)) ]; then echo \"WARNING: \$printname approaching size limit (\$total now; limit \$maxsize)\"; fi ) && (echo ----- Made recovery image:  out/target/product/sdm660_64/boot.img -------- )"
----- Making recovery image ------
Copying baseline ramdisk...
Modifying ramdisk contents...
cp: cannot stat â€˜out/target/product/sdm660_64/root/init.recovery.*.rcâ€? No such file or directory
+out/target/product/sdm660_64/boot.img maxsize=68395008 blocksize=135168 total=40777000 reserve=811008
----- Made recovery image: out/target/product/sdm660_64/boot.img --------

==== userdata.img ====

[ 91% 66361/72409] /bin/bash -c "(mkdir -p out/target/product/sdm660_64/data ) && (mkdir -p out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates && rm -rf out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"fs_type=ext4\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"system_size=3221225472\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"userdata_size=48318382080\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"extfs_sparse_flag=-s\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"squashfs_sparse_flag=-s\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"selinux_fc=out/target/product/sdm660_64/root/file_contexts.bin\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"boot_signer=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"verity=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"verity_key=build/target/product/security/verity\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"verity_signer_cmd=verity_signer\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"verity_fec=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"system_verity_block_device=/dev/block/bootdevice/by-name/system\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"recovery_as_boot=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"system_root_image=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt; echo \"ramdisk_dir=out/target/product/sdm660_64/root\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (echo \"skip_fsck=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt ) && (PATH=out/host/linux-x86/bin/:\$PATH ./build/tools/releasetools/build_image.py out/target/product/sdm660_64/data out/target/product/sdm660_64/obj/PACKAGING/userdata_intermediates/userdata_image_info.txt out/target/product/sdm660_64/userdata.img out/target/product/sdm660_64/system ) && (size=\$(for i in out/target/product/sdm660_64/userdata.img; do stat --format \"%s\" \"\$i\" | tr -d '\\n'; echo +; done; echo 0); total=\$(( \$( echo \"\$size\" ) )); printname=\$(echo -n \"out/target/product/sdm660_64/userdata.img\" | tr \" \" +); img_blocksize=135168; twoblocks=\$((img_blocksize * 2)); onepct=\$(((((49828331520 / 100) - 1) / img_blocksize + 1) * img_blocksize)); reserve=\$((twoblocks > onepct ? twoblocks : onepct)); maxsize=\$((49828331520 - reserve)); echo \"\$printname maxsize=\$maxsize blocksize=\$img_blocksize total=\$total reserve=\$reserve\"; if [ \"\$total\" -gt \"\$maxsize\" ]; then echo \"error: \$printname too large (\$total > [49828331520 - \$reserve])\"; false; elif [ \"\$total\" -gt \$((maxsize - 32768)) ]; then echo \"WARNING: \$printname approaching size limit (\$total now; limit \$maxsize)\"; fi )"
BuildImage: in_dir = out/target/product/sdm660_64/data, out_file = out/target/product/sdm660_64/userdata.img
fs type is not ext4
Running:  mkuserimg.sh -s out/target/product/sdm660_64/data out/target/product/sdm660_64/userdata.img ext4 data 48318382080 -D out/target/product/sdm660_64/system -L data out/target/product/sdm660_64/root/file_contexts.bin
make_ext4fs -s -T -1 -S out/target/product/sdm660_64/root/file_contexts.bin -L data -l 48318382080 -a data out/target/product/sdm660_64/userdata.img out/target/product/sdm660_64/data out/target/product/sdm660_64/system
Creating filesystem with parameters:
    Size: 48318382080
    Block size: 4096
    Blocks per group: 32768
    Inodes per group: 8192
    Inode size: 256
    Journal blocks: 32768
    Label: data
    Blocks: 11796480
    Block groups: 360
    Reserved block group size: 1024
Created filesystem with 43/2949120 inodes and 234594/11796480 blocks
Running ['mkuserimg.sh', '-s', 'out/target/product/sdm660_64/data', 'out/target/product/sdm660_64/userdata.img', 'ext4', 'data', '48318382080', '-D', 'out/target/product/sdm660_64/system', '-L', 'data', 'out/target/product/sdm660_64/root/file_contexts.bin'] command, exit code = 0
out/target/product/sdm660_64/userdata.img maxsize=49329967104 blocksize=135168 total=157697820 reserve=498364416

==== system.img ====

[ 94% 68726/72409] /bin/bash -c "(mkdir -p out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/ out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates && rm -rf out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"fs_type=ext4\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"system_size=3221225472\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"userdata_size=48318382080\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"extfs_sparse_flag=-s\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"squashfs_sparse_flag=-s\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"selinux_fc=out/target/product/sdm660_64/root/file_contexts.bin\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"boot_signer=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"verity=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"verity_key=build/target/product/security/verity\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"verity_signer_cmd=verity_signer\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"verity_fec=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"system_verity_block_device=/dev/block/bootdevice/by-name/system\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"recovery_as_boot=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"system_root_image=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt; echo \"ramdisk_dir=out/target/product/sdm660_64/root\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (echo \"skip_fsck=true\" >>  out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt ) && (PATH=out/host/linux-x86/bin/:\$PATH ./build/tools/releasetools/build_image.py out/target/product/sdm660_64/system out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system_image_info.txt out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img out/target/product/sdm660_64/system || ( echo \"Out of space? the tree size of out/target/product/sdm660_64/system is (MB): \" 1>&2 ; du -sm out/target/product/sdm660_64/system 1>&2; if [ \"ext4\" == \"ext4\" ]; then maxsize=3221225472; if [ \"\" == \"true\" ]; then maxsize=\$((maxsize - 4096 * 4096)); fi; echo \"The max is \$(( maxsize / 1048576 )) MB.\" 1>&2 ; else echo \"The max is \$(( 3221225472 / 1048576 )) MB.\" 1>&2 ; fi; mkdir -p out/dist; cp out/target/product/sdm660_64/installed-files.txt out/dist/installed-files-rescued.txt; exit 1 ) )"
BuildImage: in_dir = out/target/product/sdm660_64/system, out_file = out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img
fs type is not ext4
Running:  mkuserimg.sh -s /tmp/tmpiD1CKA out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img ext4 / 3170938880 -D out/target/product/sdm660_64/system -L / out/target/product/sdm660_64/root/file_contexts.bin
make_ext4fs -s -T -1 -S out/target/product/sdm660_64/root/file_contexts.bin -L / -l 3170938880 -a / out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img /tmp/tmpiD1CKA out/target/product/sdm660_64/system
Creating filesystem with parameters:
    Size: 3170938880
    Block size: 4096
    Blocks per group: 32768
    Inodes per group: 8080
    Inode size: 256
    Journal blocks: 12096
    Label: /
    Blocks: 774155
    Block groups: 24
    Reserved block group size: 191
Created filesystem with 7784/193920 inodes and 470702/774155 blocks
Running ['mkuserimg.sh', '-s', '/tmp/tmpiD1CKA', 'out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img', 'ext4', '/', '3170938880', '-D', 'out/target/product/sdm660_64/system', '-L', '/', 'out/target/product/sdm660_64/root/file_contexts.bin'] command, exit code = 0
build_verity_tree -A aee087a5be3b982978c923f566a94613496b417f2af592639bc80d141e34dfe7 out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img /tmp/tmp0zmgrC_verity_images/verity.img
system/extras/verity/build_verity_metadata.py 3170938880 /tmp/tmp0zmgrC_verity_images/verity_metadata.img 019bb80a7a07e1adc7b6eed30873d1bf14f469b7fad0571b8d84eb9ed46eaf3a aee087a5be3b982978c923f566a94613496b417f2af592639bc80d141e34dfe7 /dev/block/bootdevice/by-name/system verity_signer build/target/product/security/verity.pk8
cat /tmp/tmp0zmgrC_verity_images/verity_metadata.img >> /tmp/tmp0zmgrC_verity_images/verity.img
fec -e out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img /tmp/tmp0zmgrC_verity_images/verity.img /tmp/tmp0zmgrC_verity_images/verity_fec.img
cat /tmp/tmp0zmgrC_verity_images/verity_fec.img >> /tmp/tmp0zmgrC_verity_images/verity.img
append2simg out/target/product/sdm660_64/obj/PACKAGING/systemimage_intermediates/system.img /tmp/tmp0zmgrC_verity_images/verity.img
